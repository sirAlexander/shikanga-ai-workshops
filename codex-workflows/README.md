# Codex Workflows — Result of the Step‑by‑Step Guide

This folder contains the working project produced by completing the guide “Building Consistent Workflows with Codex CLI & the OpenAI Agents SDK — A Step‑by‑Step Guide”. It complements (but does not repeat) the following documents:

- Project‑level README: [../README.md](../README.md)
- Codex MCP Agents SDK README: [../codex/codex-mcp-agents-sdk/README.md](../codex/codex-mcp-agents-sdk/README.md)
- The step‑by‑step tutorial: [../codex/codex-mcp-agents-sdk/building-consistent-workflows-codex-agents-step-by-step.md](../codex/codex-mcp-agents-sdk/building-consistent-workflows-codex-agents-step-by-step.md)

Use those for prerequisites, environment setup, and background. This README focuses on running and navigating the finished artifacts without duplicating the tutorials.

## What’s Here
- Single‑agent workflow (tiny game generator, Step 4):
  - `codex_mcp.py` — runs a single agent that uses Codex MCP to generate a small browser game (`index.html`) with plain HTML/CSS/JS.
  - Optional sanity: `test_codex_mcp.py` starts the Codex MCP server (stdio) to verify connectivity.
- Multi‑agent workflows (single and enhanced):
  - `multi_agent_workflow.py` — minimal gating, mirrors the tutorial’s Step 5 baseline.
  - `multi_agent_workflow_with_logging.py` — strict ownership + mandatory handoffs, per‑run/rotating logs, and final validation wired in (used to complete Steps 5–6 robustly).
- Deterministic tools (used by agents): `tools/`
  - `check_files_tool.py` — gate checks for file existence.
  - `file_tools.py` — safe text writes + directory creation for specialists.
  - `workspace_tools.py` — root‑only writer + workspace reset for clean runs.
  - `project_validation_tool.py` — final tree validator used by the PM agent.
- Game example generated by the workflow (Step 5 output): `design/`, `frontend/`, `backend/`, `tests/`.
- Logs: `logs/` — rotating main log and per‑run logs to aid Step 6 (Traces) verification.
- Tests and validators: `tests/`
  - `test_check_files_tool.py` — quick sanity check for the gate tool.
  - `validate_step5_expected_tree.py` — CLI wrapper over the validation tool.

## Quick Start (details live in the tutorial)
- Single‑agent (Step 4) — tiny game generator
  - `source .venv/bin/activate`
  - `python codex_mcp.py`
  - Output: `index.html` at this folder’s root. Open it with your OS launcher.
- Multi‑agent (Steps 5–6) — enhanced workflow
  - `source .venv/bin/activate`
  - `python multi_agent_workflow_with_logging.py`
  - Backend: `node backend/server.js` → UI at http://localhost:3000/
  - Validate expected tree: `python tests/validate_step5_expected_tree.py`
  - API smoke test: `sh tests/test.sh`
  - Logs: rolling `logs/workflow_execution.log`, per‑run `logs/workflow_YYYYMMDD_HHMMSS.log`

## Workflow Guarantees
- Clean start each run (workspace reset for design/, frontend/, backend/, tests/).
- PM writes root files only; specialists own their folders.
- Mandatory handoffs (Designer → Frontend + Backend → Tester) with acknowledgements.
- Final validation of the full expected tree before completion.

If you want CI or reproducibility extras (e.g., pinned versions, log pruning, smoke tests), they can be added here without changing the tutorial documents.
